!function(t,e){"object"==typeof exports&&"undefined"!=typeof module?e(exports,require("tslib"),require("@angular/core")):"function"==typeof define&&define.amd?define("angular-rave",["exports","tslib","@angular/core"],e):e(t["angular-rave"]={},t.tslib,t.ng.core)}(this,function(t,i,e){"use strict";var n=function(){function t(){this.onclose=new e.EventEmitter,this.callback=new e.EventEmitter,this.init=new e.EventEmitter,this._raveOptions={}}return t.prototype.pay=function(){return i.__awaiter(this,void 0,void 0,function(){return i.__generator(this,function(t){switch(t.label){case 0:return this.init&&this.init.emit(),[4,this.loadScript()];case 1:return t.sent(),"function"!=typeof window.getpaidSetup?[2,console.error("ANGULAR-RAVE: Please verify that you imported rave's script into your index.html")]:(this.raveOptions&&3<Object.keys(this.raveOptions).length?this.validateOptions()&&(this.paymentSetup=window.getpaidSetup(this.raveOptions)):this.validateInput()&&(this.insertRaveOptions(),this.paymentSetup=window.getpaidSetup(this._raveOptions)),[2])}})})},t.prototype.insertRaveOptions=function(){var e=this;this.amount&&(this._raveOptions.amount=this.amount),this.PBFPubKey&&(this._raveOptions.PBFPubKey=this.PBFPubKey),this.payment_method&&(this._raveOptions.payment_method=this.payment_method),this.redirect_url&&(this._raveOptions.redirect_url=this.redirect_url),this.integrity_hash&&(this._raveOptions.integrity_hash=this.integrity_hash),this.pay_button_text&&(this._raveOptions.pay_button_text=this.pay_button_text),this.country&&(this._raveOptions.country=this.country),this.payment_plan&&(this._raveOptions.payment_plan=this.payment_plan),this.currency&&(this._raveOptions.currency=this.currency),this.custom_description&&(this._raveOptions.custom_description=this.custom_description),this.customer_email&&(this._raveOptions.customer_email=this.customer_email),this.custom_logo&&(this._raveOptions.custom_logo=this.custom_logo),this.custom_title&&(this._raveOptions.custom_title=this.custom_title),this.customer_firstname&&(this._raveOptions.customer_firstname=this.customer_firstname),this.subaccount&&(this._raveOptions.subaccount=this.subaccount),this.customer_lastname&&(this._raveOptions.customer_lastname=this.customer_lastname),this.txref&&(this._raveOptions.txref=this.txref),this.customer_phone&&(this._raveOptions.customer_phone=this.customer_phone),this.onclose&&(this._raveOptions.onclose=function(){return e.onclose.emit()}),this.init&&(this._raveOptions.init=function(){return e.init.emit()}),this.callback&&(this._raveOptions.callback=function(t){e.onclose.emit(t),e.paymentSetup.close()})},t.prototype.loadScript=function(){return new Promise(function(t){if("function"!=typeof window.getpaidSetup){var e=window.document.createElement("script");window.document.head.appendChild(e);var i=function(){e.removeEventListener("load",i),t()};e.addEventListener("load",i),e.setAttribute("src","https://ravesandboxapi.flutterwave.com/flwv3-pug/getpaidx/api/flwpbf-inline.js")}else t()})},t.prototype.validateOptions=function(){var e=this;return this.raveOptions.PBFPubKey?this.raveOptions.customer_email||this.raveOptions.customer_phone?this.raveOptions.txref?this.raveOptions.amount?this.callback.observers.length?(this.raveOptions.callback=function(t){e.callback.emit(t),e.paymentSetup.close()},!0):console.error("ANGULAR-RAVE: You should attach to callback to verify your transaction"):console.error("ANGULAR-RAVE: Amount to charge is required"):console.error("ANGULAR-RAVE: A unique transaction reference is required"):console.error("ANGULAR-RAVE: Customer email or phone number is required"):console.error("ANGULAR-RAVE: Merchant public key is required")},t.prototype.validateInput=function(){return this.PBFPubKey?this.customer_email||this.customer_phone?this.txref?this.amount?!!this.callback||console.error("ANGULAR-RAVE: You should attach to callback to verify your transaction"):console.error("ANGULAR-RAVE: Amount to charge is required"):console.error("ANGULAR-RAVE: A unique transaction reference is required"):console.error("ANGULAR-RAVE: Customer email or phone number is required"):console.error("ANGULAR-RAVE: Merchant public key is required")},t.prototype.ngOnInit=function(){this.pay()},t.decorators=[{type:e.Component,args:[{selector:"angular-rave",template:"<ng-content></ng-content>"}]}],t.ctorParameters=function(){return[]},t.propDecorators={PBFPubKey:[{type:e.Input}],integrity_hash:[{type:e.Input}],txref:[{type:e.Input}],payment_method:[{type:e.Input}],amount:[{type:e.Input}],currency:[{type:e.Input}],country:[{type:e.Input}],payment_plan:[{type:e.Input}],customer_email:[{type:e.Input}],customer_phone:[{type:e.Input}],customer_firstname:[{type:e.Input}],customer_lastname:[{type:e.Input}],subaccount:[{type:e.Input}],pay_button_text:[{type:e.Input}],custom_title:[{type:e.Input}],custom_description:[{type:e.Input}],redirect_url:[{type:e.Input}],custom_logo:[{type:e.Input}],meta:[{type:e.Input}],raveOptions:[{type:e.Input}],onclose:[{type:e.Output}],callback:[{type:e.Output}],init:[{type:e.Output}]},t}(),o=function(){function t(){this.raveOptions={},this.onclose=new e.EventEmitter,this.callback=new e.EventEmitter,this.init=new e.EventEmitter,this._raveOptions={}}return t.prototype.buttonClick=function(){this.pay()},t.prototype.pay=function(){return i.__awaiter(this,void 0,void 0,function(){return i.__generator(this,function(t){switch(t.label){case 0:return this.init&&this.init.emit(),[4,this.loadScript()];case 1:return t.sent(),"function"!=typeof window.getpaidSetup?[2,console.error("ANGULAR-RAVE: Please verify that you imported rave's script into your index.html")]:(this.raveOptions&&3<Object.keys(this.raveOptions).length?this.validateOptions()&&(this.paymentSetup=window.getpaidSetup(this.raveOptions)):this.validateInput()&&(this.insertRaveOptions(),this.paymentSetup=window.getpaidSetup(this._raveOptions)),[2])}})})},t.prototype.insertRaveOptions=function(){var e=this;this.amount&&(this._raveOptions.amount=this.amount),this.PBFPubKey&&(this._raveOptions.PBFPubKey=this.PBFPubKey),this.payment_method&&(this._raveOptions.payment_method=this.payment_method),this.redirect_url&&(this._raveOptions.redirect_url=this.redirect_url),this.integrity_hash&&(this._raveOptions.integrity_hash=this.integrity_hash),this.pay_button_text&&(this._raveOptions.pay_button_text=this.pay_button_text),this.country&&(this._raveOptions.country=this.country),this.payment_plan&&(this._raveOptions.payment_plan=this.payment_plan),this.currency&&(this._raveOptions.currency=this.currency),this.custom_description&&(this._raveOptions.custom_description=this.custom_description),this.customer_email&&(this._raveOptions.customer_email=this.customer_email),this.custom_logo&&(this._raveOptions.custom_logo=this.custom_logo),this.custom_title&&(this._raveOptions.custom_title=this.custom_title),this.customer_firstname&&(this._raveOptions.customer_firstname=this.customer_firstname),this.customer_lastname&&(this._raveOptions.customer_lastname=this.customer_lastname),this.subaccount&&(this._raveOptions.subaccount=this.subaccount),this.customer_phone&&(this._raveOptions.customer_phone=this.customer_phone),this.txref&&(this._raveOptions.txref=this.txref),this.init&&(this._raveOptions.init=function(){return e.init.emit()}),this.onclose&&(this._raveOptions.onclose=function(){return e.onclose.emit()}),this.callback&&(this._raveOptions.callback=function(t){e.onclose.emit(t),e.paymentSetup.close()})},t.prototype.validateOptions=function(){var e=this;return this.raveOptions.PBFPubKey?this.raveOptions.customer_email||this.raveOptions.customer_phone?this.raveOptions.txref?this.raveOptions.amount?this.callback.observers.length?(this.onclose.observers.length&&(this.raveOptions.onclose=function(){return e.onclose.emit()}),this.raveOptions.callback=function(t){e.callback.emit(t),e.paymentSetup.close()},!0):console.error("ANGULAR-RAVE: You should attach to callback to verify your transaction"):console.error("ANGULAR-RAVE: Amount to charge is required"):console.error("ANGULAR-RAVE: A unique transaction reference is required"):console.error("ANGULAR-RAVE: Customer email or phone number is required"):console.error("ANGULAR-RAVE: Merchant public key is required")},t.prototype.loadScript=function(){return new Promise(function(t){if("function"!=typeof window.getpaidSetup){var e=window.document.createElement("script");window.document.head.appendChild(e);var i=function(){e.removeEventListener("load",i),t()};e.addEventListener("load",i),e.setAttribute("src","https://ravesandboxapi.flutterwave.com/flwv3-pug/getpaidx/api/flwpbf-inline.js")}else t()})},t.prototype.validateInput=function(){return this.PBFPubKey?this.customer_email||this.customer_phone?this.txref?this.amount?!!this.callback||console.error("ANGULAR-RAVE: You should attach to callback to verify your transaction"):console.error("ANGULAR-RAVE: Amount to charge is required"):console.error("ANGULAR-RAVE: A unique transaction reference is required"):console.error("ANGULAR-RAVE: Customer email or phone number is required"):console.error("ANGULAR-RAVE: Merchant public key is required")},t.decorators=[{type:e.Directive,args:[{selector:"[angular-rave]"}]}],t.ctorParameters=function(){return[]},t.propDecorators={PBFPubKey:[{type:e.Input}],integrity_hash:[{type:e.Input}],txref:[{type:e.Input}],payment_method:[{type:e.Input}],amount:[{type:e.Input}],currency:[{type:e.Input}],country:[{type:e.Input}],payment_plan:[{type:e.Input}],customer_email:[{type:e.Input}],customer_phone:[{type:e.Input}],customer_firstname:[{type:e.Input}],customer_lastname:[{type:e.Input}],pay_button_text:[{type:e.Input}],custom_title:[{type:e.Input}],subaccount:[{type:e.Input}],custom_description:[{type:e.Input}],redirect_url:[{type:e.Input}],custom_logo:[{type:e.Input}],meta:[{type:e.Input}],raveOptions:[{type:e.Input}],onclose:[{type:e.Output}],callback:[{type:e.Output}],init:[{type:e.Output}],buttonClick:[{type:e.HostListener,args:["click"]}]},t}(),s=function(){},r=(function(t){function e(){return null!==t&&t.apply(this,arguments)||this}i.__extends(e,t)}(s),function(){function t(){}return t.decorators=[{type:e.NgModule,args:[{imports:[],exports:[n,o],declarations:[n,o],providers:[]}]}],t}());t.RaveOptions=s,t.AngularRaveComponent=n,t.AngularRaveDirective=o,t.AngularRaveModule=r,Object.defineProperty(t,"__esModule",{value:!0})});
//# sourceMappingURL=angular-rave.umd.min.js.map